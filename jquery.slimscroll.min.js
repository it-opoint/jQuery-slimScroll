/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.0.9.3
 *
 */
"use strict";(function(a,b,c,d,e,f,g){var h={wheelStep:20,width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"3px",baseline:"3px",start:"top",opacity:.4,alwaysVisible:f,disableFadeOut:f,railVisible:e,railOpacity:.2,enableTouch:e,enableWheel:e,mouseSensitive:e,railColor:"#333",useGlow:f,glowColor:"#fff",glowSize:"3px",classPrefix:"slimScroll",allowPageScroll:f,scroll:0,touchScrollStep:200,fadeDelay:400,hideDelay:1e3},i="<div/>",j=function(b){var c=a.extend(h,b);return c.railClass=c.classPrefix+"Rail",c.railWrapperClass=c.classPrefix+"RailDiv",c.barClass=c.classPrefix+"Bar",c.wrapperClass=c.classPrefix+"Div",c},k=function(a,b){var c={};return c["-webkit-"+a]=c["-moz-"+a]=c["-ms-"+a]=c["-o-"+a]=c[a]=b,c};a.fn.extend({slimScroll:function(h){var l=j(h);return this.each(function(){function C(c){if(j){var c=c||b.event,d=0,g=c.target||c.srcTarget;c.wheelDelta&&(d=-c.wheelDelta/120),c.detail&&(d=c.detail/3),a(g).closest("."+l.wrapperClass).is(x.parent())&&D(d,e),c.preventDefault&&!u&&c.preventDefault(),u||(c.returnValue=f)}}function D(a,b,e){var f=a,g=z.outerHeight()-B.outerHeight();if(b&&(f=d(B.css("top"))+a*d(l.wheelStep)/100*z.outerHeight(),f=c.min(c.max(f,0),g),f=a>0?c.ceil(f):c.floor(f),B.css({top:f+"px"})),r=d(B.css("top"))/g,f=r*(x[0].scrollHeight-x.outerHeight()),e){f=a;var h=f/x[0].scrollHeight*x.outerHeight();h=c.min(c.max(h,0),g),B.css({top:h+"px"})}x.scrollTop(f),F(),G()}function E(){q=c.max(x.outerHeight()/x[0].scrollHeight*z.outerHeight(),t),B.css({height:q+"px"})}function F(){return o&&(clearTimeout(o),o=g),E(),r===~~r&&(u=l.allowPageScroll,s!==r&&x.trigger("slimscroll",0===~~r?"top":"bottom")),s=r,q>=z.outerHeight()?(u=e,void 0):(l.railVisible&&A.stop(e,e).fadeIn(l.fadeDelay),B.stop(e,e).fadeIn(l.fadeDelay),z.show(),void 0)}function G(){l.alwaysVisible||o||(o=setTimeout(function(){o=g,l.disableFadeOut&&j||m||n||(l.railVisible&&A.fadeOut(l.fadeDelay),B.fadeOut(l.fadeDelay))},l.hideDelay))}var j,m,n,o,p,q,r,s,v,t=30,u=f,w=this,x=a(w),y=a(i).addClass(l.wrapperClass).css({position:"relative",overflow:"hidden",width:l.width,height:l.height}),z=a(i).addClass(l.railWrapperClass).css({position:"absolute",overflow:"hidden",width:l.size,top:l.baseline,bottom:l.baseline,background:"transparent none",zIndex:90}),A=a(i).addClass(l.railClass).css({position:"absolute",top:0,bottom:0,left:0,right:0,display:l.alwaysVisible&&l.railVisible?"block":"none",background:l.railColor,opacity:l.railOpacity,zIndex:95}),B=a(i).addClass(l.barClass).css({position:"absolute",top:0,left:0,right:0,background:l.color,opacity:l.opacity,display:l.alwaysVisible?"block":"none",zIndex:99});if(x.parent().hasClass(l.classPrefix+"Div")){if(v=x.scrollTop(),A=x.parent().find("."+l.classPrefix+"Rail"),B=x.parent().find("."+l.classPrefix+"Bar"),E(),h){if("scrollTo"in h)v=d(l.scrollTo);else if("scrollBy"in h)v+=d(l.scrollBy);else if("destroy"in h)return B.remove(),A.remove(),x.unwrap(),void 0;D(v,f,e)}}else d(l.size)>0&&(v=k("border-radius",l.size),A.css(v),B.css(v)),l.useGlow&&d(l.glowSize)>0&&A.css(k("box-shadow",l.glowColor+" 0 0 "+l.glowSize)),l.height="auto"===l.height?x.parent().innerHeight():l.height,x.css({overflow:"hidden",width:l.width,height:l.height}),z.css("right"===l.position?{right:l.distance}:{left:l.distance}),x.wrap(y),z.append(A),z.append(B),x.parent().append(z),B.draggable({axis:"y",containment:"parent",start:function(){n=e},stop:function(){n=f,G()},drag:function(){D(0,f,f)}}),l.alwaysVisible||(A.hover(function(){F()},function(){G()}),B.hover(function(){m=e},function(){m=f}),x.hover(function(){j=e,F(),G()},function(){j=f,G()}),l.mouseSensitive&&(x.mousemove(function(){j=e,F(),G()}),x.mouseleave(function(){j=f,G()}))),l.enableTouch&&(x.bind("touchstart",function(a){a.originalEvent.touches.length&&(p=a.originalEvent.touches[0].pageY)}),x.bind("touchmove",function(a){if(a.originalEvent.preventDefault(),a.originalEvent.touches.length){var b=(p-a.originalEvent.touches[0].pageY)/l.touchScrollStep;D(b,e)}})),l.enableWheel&&(b.addEventListener?(w.addEventListener("DOMMouseScroll",C,f),w.addEventListener("mousewheel",C,f)):b.document.attachEvent("onmousewheel",C)),E(),"bottom"===l.start?(B.css({top:z.outerHeight()-B.outerHeight()}),D(0,e)):"object"==typeof l.start&&(D(a(l.start).position().top,g,e),l.alwaysVisible||B.hide()),l.alwaysVisible||l.railVisible||z.hide()}),this}}),a.fn.extend({slimscroll:a.fn.slimScroll})})(jQuery,window,Math,parseInt,!0,!1,null);